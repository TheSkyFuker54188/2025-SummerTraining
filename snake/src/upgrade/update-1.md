我将分析当前蛇尸体策略的不足，并根据 BodyPro_Plan.md 实现优化。

## 当前尸体策略分析

当前实现中的尸体处理逻辑分布在三个关键区域：

1. **价值计算** (647-658行):

   ```cpp
   if (mp[y][x] >= 10) {
       num = mp[y][x] * 60 + 50; // 极高价值尸体
   } else if (mp[y][x] >= 5) {
       num = mp[y][x] * 50 + 25; // 高价值尸体
   }
   ```
2. **竞争系数调整** (770-786行):

   ```cpp
   if (dist < self_distance) {
       if (mp[y][x] >= 8) {
           competition_factor *= 0.85f; // 减少15%
       } else {
           competition_factor *= 0.7f; // 减少30%
       }
   }
   ```
3. **即时反应机制** (934-970行):

   ```cpp
   if (item.value >= 5) {
       int dist = abs(head.y - item.pos.y) + abs(head.x - item.pos.x);
       if (dist <= immediate_range * 2) { // 范围仅为6
           // 移动逻辑...
       }
   }
   ```

## 主要问题

1. 没有根据距离分层优先级
2. 检测范围不足
3. 没有对极近距离尸体特殊处理
4. 价值计算未充分考虑距离因素

## 优化方案解析

我已根据 `BodyPro_Plan.md` 的指导实现了一个更专注、更高效的尸体策略。主要改进包括：

### 1. 距离分层尸体优先级

实现了三层距离优先级策略：

- **极近距离优先级**（≤3格）：任何高价值尸体(≥5)都立即吸引蛇的注意
- **近距离优先级**（≤6格）：更高价值尸体(≥8)优先处理
- **扩展距离优先级**（≤10格）：仅极高价值尸体(≥10)才会引起注意

这种分层解决了之前"不关注近距离高价值尸体"的问题，让蛇能够更积极地获取周围高价值资源。

### 2. 动态价值评估系统

优化了BFS评估函数中的价值计算：

```cpp
if (mp[y][x] >= 10) {
    // 极高价值尸体，基于距离动态调整价值
    if (head_dist <= 6) {
        num = mp[y][x] * 200 + 200; // 翻倍价值
    } else if (head_dist <= 10) {
        num = mp[y][x] * 120 + 120; // 中等提升
    } else {
        num = mp[y][x] * 80 + 80;   // 标准提升
    }
}
```

这使得近距离的尸体价值大幅提升，远距离的尸体价值适度，形成更合理的梯度。

### 3. 优化竞争系数调整

根据尸体价值和距离，对竞争系数做精细化调整：

```cpp
if (mp[y][x] >= 10 && self_distance <= 6) {
    competition_factor *= 0.95f; // 近距离高价值尸体几乎不降低竞争意愿
} 
```

这种策略鼓励蛇更积极地争夺近距离高价值尸体，减少对远距离尸体的盲目追求。

### 4. 保留目标锁定接口

按照反馈建议，我们：

- 保留了目标锁定的代码接口
- 但默认关闭了实际锁定逻辑
- 移除了尸体追踪机制

这使代码更精简，同时保留了未来可能需要的功能接口。

## 改进效果预期

1. **更聪明的近距离判断**：蛇会优先处理"就在身边"的高价值尸体
2. **梯度式价值评估**：根据距离和价值的组合动态调整尸体重要性
3. **更加激进的竞争策略**：对近距离高价值尸体更愿意与其他蛇竞争
4. **避免远距离追逐**：不再盲目追逐远处的尸体，更加专注于附近资源

这些改进使AI的尸体处理策略更符合实战需求，更高效，更专注于高回报的短期机会。
